apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

commonAnnotations:
  kubeflow.oraclecloud.com/version: 1.7.0

resources:
- ../base

components:

# !!! components need to be applied in the right order: 
# letsencrypt creates a ssl cert so https add-on is not required
# IDCS requires that SSL has been setup in order to be secure, 
# so it needs to be applied after the https or letsencrypt add-on

# For self-signed certificate, using IP
# - ../add-ons/https

# For use with domain name, to generate letsencrypt certificate for the root domain (no wildcard)
# Note wildcard is needed to serve models with KServe, so the use of the letsencrypt-dns01 is recommended
- ../add-ons/letsencrypt-http01

# For wildcard certificate, using dns01 challenge. This requires the use of OCI DNS Zone.
# This is required to set a certificate on the subdomains generated by KServe to serve models
# View README about the required setup
# - ../add-ons/letsencrypt-dns01

# IDCS integration
- ../add-ons/idcs

# direct IDCS currently fails due to an issue with the revoke API endpoint in IDCS.
# - ../add-ons/idcs-no-dex

# Managed MySQL service integration
- ../add-ons/external-mysql

# Oracle Object Storage backend, instead of Kubernetes hosted minio storage.
# Note this only works with the home region.
- ../add-ons/oci-object-storage